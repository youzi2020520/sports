"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const U=require("react/jsx-runtime"),v=require("react");function z(e,t="Assertion error"){if(!e)throw Error(t)}function B({group:e}){const{orientation:t,panels:n}=e;return n.reduce((o,i)=>(o+=t==="horizontal"?i.element.offsetWidth:i.element.offsetHeight,o),0)}function re(e,t){return t.sort(e==="horizontal"?Be:We)}function Be(e,t){const n=e.element.offsetLeft-t.element.offsetLeft;return n!==0?n:e.element.offsetWidth-t.element.offsetWidth}function We(e,t){const n=e.element.offsetTop-t.element.offsetTop;return n!==0?n:e.element.offsetHeight-t.element.offsetHeight}function Pe(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function Re(e,t){return{x:e.x>=t.left&&e.x<=t.right?0:Math.min(Math.abs(e.x-t.left),Math.abs(e.x-t.right)),y:e.y>=t.top&&e.y<=t.bottom?0:Math.min(Math.abs(e.y-t.top),Math.abs(e.y-t.bottom))}}function Ve({orientation:e,rects:t,targetRect:n}){const o={x:n.x+n.width/2,y:n.y+n.height/2};let i,s=Number.MAX_VALUE;for(const l of t){const{x:r,y:a}=Re(o,l),u=e==="horizontal"?r:a;u<s&&(s=u,i=l)}return z(i,"No rect found"),i}function Ce(e){const{element:t,orientation:n,panels:o,separators:i}=e,s=re(n,Array.from(t.children).filter(Pe).map(f=>({element:f}))).map(({element:f})=>f),l=[];let r=!1,a,u=[];for(const f of s)if(f.hasAttribute("data-panel")){const p=o.find(m=>m.element===f);if(p){if(a){const m=a.element.getBoundingClientRect(),h=f.getBoundingClientRect();let c;if(r){const d=n==="horizontal"?new DOMRect(m.right,m.top,0,m.height):new DOMRect(m.left,m.bottom,m.width,0),y=n==="horizontal"?new DOMRect(h.left,h.top,0,h.height):new DOMRect(h.left,h.top,h.width,0);switch(u.length){case 0:{c=[d,y];break}case 1:{const S=u[0],x=Ve({orientation:n,rects:[m,h],targetRect:S.element.getBoundingClientRect()});c=[S,x===m?y:d];break}default:{c=u;break}}}else u.length?c=u:c=[n==="horizontal"?new DOMRect(m.right,h.top,h.left-m.right,h.height):new DOMRect(h.left,m.bottom,h.width,h.top-m.bottom)];for(const d of c)l.push({group:e,groupSize:B({group:e}),panels:[a,p],separator:"width"in d?void 0:d,rect:"width"in d?d:d.element.getBoundingClientRect()})}r=!1,a=p,u=[]}}else if(f.hasAttribute("data-separator")){const p=i.find(m=>m.element===f);p?u.push(p):(a=void 0,u=[])}else r=!0;return l}function Ue(e,t){const n=getComputedStyle(e),o=parseFloat(n.fontSize);return t*o}function Ke(e,t){const n=getComputedStyle(e.ownerDocument.body),o=parseFloat(n.fontSize);return t*o}function qe(e){return e/100*window.innerHeight}function Xe(e){return e/100*window.innerWidth}function Ye(e){switch(typeof e){case"number":return[e,"px"];case"string":{const t=parseFloat(e);return e.endsWith("%")?[t,"%"]:e.endsWith("px")?[t,"px"]:e.endsWith("rem")?[t,"rem"]:e.endsWith("em")?[t,"em"]:e.endsWith("vh")?[t,"vh"]:e.endsWith("vw")?[t,"vw"]:[t,"%"]}}}function ee({groupSize:e,panelElement:t,styleProp:n}){let o;const[i,s]=Ye(n);switch(s){case"%":{o=i/100*e;break}case"px":{o=i;break}case"rem":{o=Ke(t,i);break}case"em":{o=Ue(t,i);break}case"vh":{o=qe(i);break}case"vw":{o=Xe(i);break}}return o}function I(e){return parseFloat(e.toFixed(3))}function pe(e){const{panels:t}=e,n=B({group:e});return n===0?t.map(o=>({collapsedSize:0,collapsible:o.panelConstraints.collapsible===!0,defaultSize:void 0,minSize:0,maxSize:100,panelId:o.id})):t.map(o=>{const{element:i,panelConstraints:s}=o;let l=0;if(s.collapsedSize){const f=ee({groupSize:n,panelElement:i,styleProp:s.collapsedSize});l=I(f/n*100)}let r;if(s.defaultSize){const f=ee({groupSize:n,panelElement:i,styleProp:s.defaultSize});r=I(f/n*100)}let a=0;if(s.minSize){const f=ee({groupSize:n,panelElement:i,styleProp:s.minSize});a=I(f/n*100)}let u=100;if(s.maxSize){const f=ee({groupSize:n,panelElement:i,styleProp:s.maxSize});u=I(f/n*100)}return{collapsedSize:l,collapsible:s.collapsible===!0,defaultSize:r,minSize:a,maxSize:u,panelId:o.id}})}class Ze{#e={};addListener(t,n){const o=this.#e[t];return o===void 0?this.#e[t]=[n]:o.includes(n)||o.push(n),()=>{this.removeListener(t,n)}}emit(t,n){const o=this.#e[t];if(o!==void 0)if(o.length===1)o[0].call(null,n);else{let i=!1,s=null;const l=Array.from(o);for(let r=0;r<l.length;r++){const a=l[r];try{a.call(null,n)}catch(u){s===null&&(i=!0,s=u)}}if(i)throw s}}removeAllListeners(){this.#e={}}removeListener(t,n){const o=this.#e[t];if(o!==void 0){const i=o.indexOf(n);i>=0&&o.splice(i,1)}}}function C(e,t,n=0){return Math.abs(I(e)-I(t))<=n}let E={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const O=new Ze;function G(){return E}function M(e){const t=typeof e=="function"?e(E):e;if(E===t)return E;const n=E;return E={...E,...t},t.cursorFlags!==void 0&&O.emit("cursorFlagsChange",E.cursorFlags),t.interactionState!==void 0&&O.emit("interactionStateChange",E.interactionState),t.mountedGroups!==void 0&&(E.mountedGroups.forEach((o,i)=>{o.derivedPanelConstraints.forEach(s=>{if(s.collapsible){const{layout:l}=n.mountedGroups.get(i)??{};if(l){const r=C(s.collapsedSize,o.layout[s.panelId]),a=C(s.collapsedSize,l[s.panelId]);r&&!a&&(i.inMemoryLastExpandedPanelSizes[s.panelId]=l[s.panelId])}}})}),O.emit("mountedGroupsChange",E.mountedGroups)),E}function Je(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function K(e,t){return C(e,t)?0:e>t?1:-1}function H({panelConstraints:e,size:t}){const{collapsedSize:n=0,collapsible:o,maxSize:i=100,minSize:s=0}=e;if(K(t,s)<0)if(o){const l=(n+s)/2;K(t,l)<0?t=n:t=s}else t=s;return t=Math.min(i,t),t=I(t),t}function q({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:o,prevLayout:i,trigger:s}){if(C(e,0))return t;const l=Object.values(t),r=Object.values(i),a=[...l],[u,f]=o;z(u!=null,"Invalid first pivot index"),z(f!=null,"Invalid second pivot index");let p=0;if(s==="keyboard"){{const c=e<0?f:u,d=n[c];z(d,`Panel constraints not found for index ${c}`);const{collapsedSize:y=0,collapsible:S,minSize:x=0}=d;if(S){const b=l[c];if(z(b!=null,`Previous layout not found for panel index ${c}`),C(b,y)){const g=x-b;K(g,Math.abs(e))>0&&(e=e<0?0-g:g)}}}{const c=e<0?u:f,d=n[c];z(d,`No panel constraints found for index ${c}`);const{collapsedSize:y=0,collapsible:S,minSize:x=0}=d;if(S){const b=l[c];if(z(b!=null,`Previous layout not found for panel index ${c}`),C(b,x)){const g=b-y;K(g,Math.abs(e))>0&&(e=e<0?0-g:g)}}}}{const c=e<0?1:-1;let d=e<0?f:u,y=0;for(;;){const x=l[d];z(x!=null,`Previous layout not found for panel index ${d}`);const g=H({panelConstraints:n[d],size:100})-x;if(y+=g,d+=c,d<0||d>=n.length)break}const S=Math.min(Math.abs(e),Math.abs(y));e=e<0?0-S:S}{let d=e<0?u:f;for(;d>=0&&d<n.length;){const y=Math.abs(e)-Math.abs(p),S=l[d];z(S!=null,`Previous layout not found for panel index ${d}`);const x=S-y,b=H({panelConstraints:n[d],size:x});if(!C(S,b)&&(p+=S-b,a[d]=b,p.toFixed(3).localeCompare(Math.abs(e).toFixed(3),void 0,{numeric:!0})>=0))break;e<0?d--:d++}}if(Je(r,a))return i;{const c=e<0?f:u,d=l[c];z(d!=null,`Previous layout not found for panel index ${c}`);const y=d+p,S=H({panelConstraints:n[c],size:y});if(a[c]=S,!C(S,y)){let x=y-S,g=e<0?f:u;for(;g>=0&&g<n.length;){const L=a[g];z(L!=null,`Previous layout not found for panel index ${g}`);const P=L+x,R=H({panelConstraints:n[g],size:P});if(C(L,R)||(x-=R-L,a[g]=R),C(x,0))break;e>0?g--:g++}}}const m=Object.values(a).reduce((c,d)=>d+c,0);if(!C(m,100,.1))return i;const h=Object.keys(i);return a.reduce((c,d,y)=>(c[h[y]]=d,c),{})}function ne(e){const t=e.parentElement;z(t,"Parent group element not found");const{mountedGroups:n}=G();for(const[o]of n)if(o.element===t)return o;throw Error("Could not find parent Group for separator element")}function W(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(t[n]===void 0||K(e[n],t[n])!==0)return!1;return!0}function T({layout:e,panelConstraints:t}){const o=[...Object.values(e)],i=o.reduce((r,a)=>r+a,0);if(o.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${o.map(r=>`${r}%`).join(", ")}`);if(!C(i,100)&&o.length>0)for(let r=0;r<t.length;r++){const a=o[r];z(a!=null,`No layout data found for index ${r}`);const u=100/i*a;o[r]=u}let s=0;for(let r=0;r<t.length;r++){const a=o[r];z(a!=null,`No layout data found for index ${r}`);const u=H({panelConstraints:t[r],size:a});a!=u&&(s+=a-u,o[r]=u)}if(!C(s,0))for(let r=0;r<t.length;r++){const a=o[r];z(a!=null,`No layout data found for index ${r}`);const u=a+s,f=H({panelConstraints:t[r],size:u});if(a!==f&&(s-=f-a,o[r]=f,C(s,0)))break}const l=Object.keys(e);return o.reduce((r,a,u)=>(r[l[u]]=a,r),{})}function Ee({groupId:e}){const t=()=>{const{mountedGroups:n}=G();for(const[o,i]of n)if(o.id===e)return{group:o,...i};throw Error(`Could not find Group with id "${e}"`)};return{getLayout(){const{defaultLayoutDeferred:n,layout:o}=t();return n?{}:o},setLayout(n){const{defaultLayoutDeferred:o,derivedPanelConstraints:i,group:s,layout:l,separatorToPanels:r}=t(),a=T({layout:n,panelConstraints:i});return o?l:(W(l,a)||M(u=>({mountedGroups:new Map(u.mountedGroups).set(s,{defaultLayoutDeferred:o,derivedPanelConstraints:i,layout:a,separatorToPanels:r})})),a)}}}function Me(e){const{mountedGroups:t}=G(),n=t.get(e);return z(n,`Mounted Group ${e.id} not found`),n}function D(e,t){const n=ne(e),o=Me(n),i=n.separators.find(p=>p.element===e);z(i,"Matching separator not found");const s=o.separatorToPanels.get(i);z(s,"Matching panels not found");const l=s.map(p=>n.panels.indexOf(p)),a=Ee({groupId:n.id}).getLayout(),u=q({delta:t,initialLayout:a,panelConstraints:o.derivedPanelConstraints,pivotIndices:l,prevLayout:a,trigger:"keyboard"}),f=T({layout:u,panelConstraints:o.derivedPanelConstraints});W(a,f)||M(p=>({mountedGroups:new Map(p.mountedGroups).set(n,{defaultLayoutDeferred:o.defaultLayoutDeferred,derivedPanelConstraints:o.derivedPanelConstraints,layout:f,separatorToPanels:o.separatorToPanels})}))}function he(e){if(e.defaultPrevented)return;const t=e.currentTarget,n=ne(t);if(!n.disabled)switch(e.key){case"ArrowDown":{e.preventDefault(),n.orientation==="vertical"&&D(t,5);break}case"ArrowLeft":{e.preventDefault(),n.orientation==="horizontal"&&D(t,-5);break}case"ArrowRight":{e.preventDefault(),n.orientation==="horizontal"&&D(t,5);break}case"ArrowUp":{e.preventDefault(),n.orientation==="vertical"&&D(t,-5);break}case"End":{e.preventDefault(),D(t,100);break}case"Enter":{e.preventDefault();const o=ne(t),{derivedPanelConstraints:i,layout:s,separatorToPanels:l}=Me(o),r=o.separators.find(p=>p.element===t);z(r,"Matching separator not found");const a=l.get(r);z(a,"Matching panels not found");const u=a[0],f=i.find(p=>p.panelId===u.id);if(z(f,"Panel metadata not found"),f.collapsible){const p=s[u.id],m=f.collapsedSize===p?o.inMemoryLastExpandedPanelSizes[u.id]??f.minSize:f.collapsedSize;D(t,m-p)}break}case"F6":{e.preventDefault();const i=ne(t).separators.map(a=>a.element),s=Array.from(i).findIndex(a=>a===e.currentTarget);z(s!==null,"Index not found");const l=e.shiftKey?s>0?s-1:i.length-1:s+1<i.length?s+1:0;i[l].focus();break}case"Home":{e.preventDefault(),D(t,-100);break}}}const Qe=e=>e,oe=()=>{},ke=1,Ie=2,Ge=4,De=8,me={coarse:10,precise:5};function et(e,t,n){let o,i={x:1/0,y:1/0};for(const s of t){const l=Re(n,s.rect);switch(e){case"horizontal":{l.x<=i.x&&(o=s,i=l);break}case"vertical":{l.y<=i.y&&(o=s,i=l);break}}}return o?{distance:i,hitRegion:o}:void 0}let te;function tt(){return te===void 0&&(typeof matchMedia=="function"?te=!!matchMedia("(pointer:coarse)").matches:te=!1),te}function nt(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function ot(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:Se(e),b:Se(t)};let o;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),o=e;z(o,"Stacking order can only be calculated for elements with a common ancestor");const i={a:ge(ye(n.a)),b:ge(ye(n.b))};if(i.a===i.b){const s=o.childNodes,l={a:n.a.at(-1),b:n.b.at(-1)};let r=s.length;for(;r--;){const a=s[r];if(a===l.a)return 1;if(a===l.b)return-1}}return Math.sign(i.a-i.b)}const rt=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function it(e){const t=getComputedStyle(Oe(e)??e).display;return t==="flex"||t==="inline-flex"}function st(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||it(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||rt.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function ye(e){let t=e.length;for(;t--;){const n=e[t];if(z(n,"Missing node"),st(n))return n}return null}function ge(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Se(e){const t=[];for(;e;)t.push(e),e=Oe(e);return t}function Oe(e){const{parentNode:t}=e;return nt(t)?t.host:t}function at(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function lt({groupElement:e,hitRegion:t,pointerEventTarget:n}){if(!Pe(n)||n.contains(e)||e.contains(n))return!0;if(ot(n,e)>0){let o=n;for(;o;){if(o.contains(e))return!0;if(at(o.getBoundingClientRect(),t))return!1;o=o.parentElement}}return!0}function Te(e,t){const n=[];return t.forEach((o,i)=>{if(i.disabled)return;const s=tt()?me.coarse:me.precise,l=Ce(i),r=et(i.orientation,l,{x:e.clientX,y:e.clientY});r&&r.distance.x<=s&&r.distance.y<=s&&lt({groupElement:i.element,hitRegion:r.hitRegion.rect,pointerEventTarget:e.target})&&n.push(r.hitRegion)}),n}function ve(e){if(e.defaultPrevented)return;const{mountedGroups:t}=G(),n=Te(e,t),o=new Set,i=new Set,s=new Set,l=new Map;let r=!1;n.forEach(a=>{o.add(a.group),a.panels.forEach(f=>{i.add(f)}),a.separator&&(s.add(a.separator),r||(r=!0,a.separator.element.focus()));const u=t.get(a.group);u&&l.set(a.group,u.layout)}),M({interactionState:{hitRegions:n,initialLayoutMap:l,pointerDownAtPoint:{x:e.clientX,y:e.clientY},state:"active"}}),n.length&&e.preventDefault()}function ut({cursorFlags:e,groups:t,state:n}){let o=0,i=0;switch(n){case"active":case"hover":t.forEach(s=>{if(!s.disableCursor)switch(s.orientation){case"horizontal":{o++;break}case"vertical":{i++;break}}})}if(o===0&&i===0)return null;switch(n){case"active":{const s=(e&ke)!==0,l=(e&Ie)!==0,r=(e&Ge)!==0,a=(e&De)!==0;if(e){if(s)return r?"se-resize":a?"ne-resize":"e-resize";if(l)return r?"sw-resize":a?"nw-resize":"w-resize";if(r)return"s-resize";if(a)return"n-resize"}break}}return o>0&&i>0?"move":o>0?"ew-resize":"ns-resize"}const xe=new WeakMap;function ie(e){if(e.defaultView===null)return;let{prevStyle:t,styleSheet:n}=xe.get(e)??{};n===void 0&&(n=new e.defaultView.CSSStyleSheet,e.adoptedStyleSheets=[n]);const{cursorFlags:o,interactionState:i}=G();switch(i.state){case"active":case"hover":{const s=ut({cursorFlags:o,groups:i.hitRegions.map(r=>r.group),state:i.state}),l=`*{cursor: ${s} !important; ${i.state==="active"?"touch-action: none;":""} }`;if(t===l)return;t=l,s?n.cssRules.length===0?n.insertRule(l):n.replaceSync(l):n.cssRules.length===1&&n.deleteRule(0);break}case"inactive":{t=void 0,n.cssRules.length===1&&n.deleteRule(0);break}}xe.set(e,{prevStyle:t,styleSheet:n})}function _e({document:e,event:t,hitRegions:n,initialLayoutMap:o,mountedGroups:i,pointerDownAtPoint:s}){let l=0;const r=new Map(i);n.forEach(a=>{const{group:u,groupSize:f}=a,{disableCursor:p,orientation:m,panels:h}=u;let c=0;s?m==="horizontal"?c=(t.clientX-s.x)/f*100:c=(t.clientY-s.y)/f*100:m==="horizontal"?c=t.clientX<0?-100:100:c=t.clientY<0?-100:100;const d=o.get(u),{defaultLayoutDeferred:y,derivedPanelConstraints:S,layout:x,separatorToPanels:b}=i.get(u)??{defaultLayoutDeferred:!1};if(S&&d&&x&&b){const g=q({delta:c,initialLayout:d,panelConstraints:S,pivotIndices:a.panels.map(L=>h.indexOf(L)),prevLayout:x,trigger:"mouse-or-touch"});if(W(g,x)){if(c!==0&&!p)switch(m){case"horizontal":{l|=c<0?ke:Ie;break}case"vertical":{l|=c<0?Ge:De;break}}}else{r.set(a.group,{defaultLayoutDeferred:y,derivedPanelConstraints:S,layout:g,separatorToPanels:b});const L=a.group.panels.map(({id:P})=>P).join(",");a.group.inMemoryLayouts[L]=g}}}),M({cursorFlags:l,mountedGroups:r}),ie(e)}function be(e){const{interactionState:t,mountedGroups:n}=G();switch(t.state){case"active":_e({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n})}}function ze(e){if(e.defaultPrevented)return;const{interactionState:t,mountedGroups:n}=G();switch(t.state){case"active":{if(e.buttons===0){M(o=>o.interactionState.state==="inactive"?o:{cursorFlags:0,interactionState:{state:"inactive"}});return}_e({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:t.pointerDownAtPoint});break}default:{const o=Te(e,n);o.length===0?t.state!=="inactive"&&M({interactionState:{state:"inactive"}}):M({interactionState:{hitRegions:o,state:"hover"}}),ie(e.currentTarget);break}}}function we(e){if(e.defaultPrevented)return;e.preventDefault();const{interactionState:t}=G();switch(t.state){case"active":M({cursorFlags:0,interactionState:{state:"inactive"}}),ie(e.currentTarget)}}function Le(e){let t=0,n=0;const o={};for(const s of e)if(s.defaultSize!==void 0){t++;const l=I(s.defaultSize);n+=l,o[s.panelId]=l}else o[s.panelId]=void 0;const i=e.length-t;if(i!==0){const s=I((100-n)/i);for(const l of e)l.defaultSize===void 0&&(o[l.panelId]=s)}return o}function ct(e,t,n){const o=n[0];if(!o)return;const i=e.panels.find(l=>l.element===t);if(!i||!i.onResize)return;const s=B({group:e});i.onResize({asPercentage:I(o.inlineSize/s*100),inPixels:o.inlineSize},i.id)}function ft(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const o in e)if(e[o]!==t[o])return!1;return!0}function dt(e,t){const n=e.map(i=>i.id),o=Object.keys(t);if(n.length!==o.length)return!1;for(const i of n)if(!o.includes(i))return!1;return!0}const F=new Map;function pt(e){let t=!0;z(e.element.ownerDocument.defaultView,"Cannot register an unmounted Group");const n=e.element.ownerDocument.defaultView.ResizeObserver,o=new Set,i=new Set,s=new n(c=>{for(const d of c){const{borderBoxSize:y,target:S}=d;if(S===e.element){if(t){if(B({group:e})===0)return;M(b=>{const g=b.mountedGroups.get(e);if(g){const L=pe(e),P=g.defaultLayoutDeferred?Le(L):g.layout,R=T({layout:P,panelConstraints:L});return!g.defaultLayoutDeferred&&W(P,R)&&ft(g.derivedPanelConstraints,L)?b:{mountedGroups:new Map(b.mountedGroups).set(e,{defaultLayoutDeferred:!1,derivedPanelConstraints:L,layout:R,separatorToPanels:g.separatorToPanels})}}return b})}}else ct(e,S,y)}});s.observe(e.element),e.panels.forEach(c=>{z(!o.has(c.id),`Panel ids must be unique; id "${c.id}" was used more than once`),o.add(c.id),c.onResize&&s.observe(c.element)});const l=B({group:e}),r=pe(e),a=e.panels.map(({id:c})=>c).join(",");let u=e.defaultLayout;u&&(dt(e.panels,u)||(u=void 0));const f=e.inMemoryLayouts[a]??u??Le(r),p=T({layout:f,panelConstraints:r}),m=Ce(e),h=e.element.ownerDocument;return M(c=>{const d=new Map;return F.set(h,(F.get(h)??0)+1),m.forEach(y=>{y.separator&&d.set(y.separator,y.panels)}),{mountedGroups:new Map(c.mountedGroups).set(e,{defaultLayoutDeferred:l===0,derivedPanelConstraints:r,layout:p,separatorToPanels:d})}}),e.separators.forEach(c=>{z(!i.has(c.id),`Separator ids must be unique; id "${c.id}" was used more than once`),i.add(c.id),c.element.addEventListener("keydown",he)}),F.get(h)===1&&(h.addEventListener("pointerdown",ve),h.addEventListener("pointerleave",be),h.addEventListener("pointermove",ze),h.addEventListener("pointerup",we)),function(){t=!1,F.set(h,Math.max(0,(F.get(h)??0)-1)),M(d=>{const y=new Map(d.mountedGroups);return y.delete(e),{mountedGroups:y}}),e.separators.forEach(d=>{d.element.removeEventListener("keydown",he)}),F.get(h)||(h.removeEventListener("pointerdown",ve),h.removeEventListener("pointerleave",be),h.removeEventListener("pointermove",ze),h.removeEventListener("pointerup",we)),s.disconnect()}}function se(e){const t=v.useId();return`${e??t}`}const _=typeof window<"u"?v.useLayoutEffect:v.useEffect;function ae(e){const t=v.useRef(e);return _(()=>{t.current=e},[e]),v.useCallback(n=>t.current?.(n),[t])}function le(...e){return ae(t=>{e.forEach(n=>{if(n)switch(typeof n){case"function":{n(t);break}case"object":{n.current=t;break}}})})}function ht(e){const t=v.useRef({...e});return _(()=>{for(const n in e)t.current[n]=e[n]},[e]),t.current}const Ne="--react-resizable-panels--panel--pointer-events";function Ae(e,t){const n=e.replace(/[^a-zA-Z0-9\-_]/g,""),o=t.replace(/[^a-zA-Z0-9\-_]/g,"");return`--react-resizable-panels--${n}--${o}`}const $e=v.createContext(null);function mt(e,t){const n=v.useRef({getLayout:()=>({}),setLayout:Qe});v.useImperativeHandle(t,()=>n.current,[]),_(()=>{Object.assign(n.current,Ee({groupId:e}))})}function yt({children:e,className:t,defaultLayout:n,disableCursor:o,disabled:i,elementRef:s,groupRef:l,id:r,onLayoutChange:a,orientation:u="horizontal",style:f,...p}){const m=v.useRef({}),h=ae(w=>{W(m.current,w)||(m.current=w,a?.(w))}),c=se(r),[d,y]=v.useState(!1),[S,x]=v.useState(null),[b,g]=v.useState(n??{}),[L,P]=v.useState([]),[R,X]=v.useState([]),Y=v.useRef({lastExpandedPanelSizes:{},layouts:{}}),Z=le(x,s);mt(c,l);const J=v.useMemo(()=>({id:c,orientation:u,registerPanel:w=>(P(k=>re(u,[...k,w])),()=>{P(k=>k.filter(A=>A!==w))}),registerSeparator:w=>(X(k=>re(u,[...k,w])),()=>{X(k=>k.filter(A=>A!==w))})}),[c,u]),N=ht({defaultLayout:n,disableCursor:o}),V=v.useRef(null);_(()=>{if(S===null)return;const w={defaultLayout:N.defaultLayout,disableCursor:!!N.disableCursor,disabled:!!i,element:S,id:c,inMemoryLastExpandedPanelSizes:Y.current.lastExpandedPanelSizes,inMemoryLayouts:Y.current.layouts,orientation:u,panels:L,separators:R};V.current=w;const k=pt(w),fe=G().mountedGroups.get(w);if(fe){const{defaultLayoutDeferred:$,derivedPanelConstraints:j,layout:Q}=fe;!$&&j.length>0&&(g(Q),h?.(Q))}const je=O.addListener("interactionStateChange",$=>{switch($.state){case"active":{y($.hitRegions.some(j=>j.group===w));break}default:{y(!1);break}}}),Fe=O.addListener("mountedGroupsChange",$=>{const j=$.get(w);if(j){const{defaultLayoutDeferred:Q,derivedPanelConstraints:He,layout:de}=j;if(Q||He.length===0)return;g(de),h?.(de)}});return()=>{V.current=null,k(),je(),Fe()}},[i,S,c,h,u,L,R,N]),v.useEffect(()=>{const w=V.current;w&&(w.defaultLayout=n,w.disableCursor=!!o)});const ce={[Ne]:d?"none":void 0};for(const w in b){const k=Ae(c,w),A=b[w];ce[k]=A}return U.jsx($e.Provider,{value:J,children:U.jsx("div",{...p,"aria-orientation":u,className:t,"data-group":!0,"data-testid":c,id:c,ref:Z,style:{...f,...ce,display:"flex",flexDirection:u==="horizontal"?"row":"column",flexWrap:"nowrap"},children:e})})}function gt(e,t=10){let n=null;return o=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(o)},t)}}function St(e){return`react-resizable-panels:${e}`}function vt({debounceSaveMs:e=100,storage:t,...n}){const o="id"in n?n.id:n.groupId,i=St(o),s=v.useSyncExternalStore(xt,()=>t.getItem(i),()=>t.getItem(i)),l=v.useMemo(()=>s?JSON.parse(s):void 0,[s]),r=v.useMemo(()=>{const a=u=>{try{t.setItem(i,JSON.stringify(u))}catch(f){console.error(f)}};return e>0?gt(a,e):a},[e,t,i]);return{defaultLayout:l,onLayoutChange:r}}function xt(){return function(){}}function bt(){return v.useState(null)}function zt(){return v.useRef(null)}function ue(){const e=v.useContext($e);return z(e,"Group Context not found; did you render a Panel or Separator outside of a Group?"),e}function wt({groupId:e,panelId:t}){const n=()=>{const{mountedGroups:r}=G();for(const[a,{defaultLayoutDeferred:u,derivedPanelConstraints:f,layout:p,separatorToPanels:m}]of r)if(a.id===e)return{defaultLayoutDeferred:u,derivedPanelConstraints:f,group:a,layout:p,separatorToPanels:m};throw Error(`Group ${e} not found`)},o=()=>{const r=n().derivedPanelConstraints.find(a=>a.panelId===t);if(r!==void 0)return r;throw Error(`Panel constraints not found for Panel ${t}`)},i=()=>{const r=n().group.panels.find(a=>a.id===t);if(r!==void 0)return r;throw Error(`Layout not found for Panel ${t}`)},s=()=>{const r=n().layout[t];if(r!==void 0)return r;throw Error(`Layout not found for Panel ${t}`)},l=r=>{const a=s();if(r===a)return;const{defaultLayoutDeferred:u,derivedPanelConstraints:f,group:p,layout:m,separatorToPanels:h}=n(),c=p.panels.findIndex(x=>x.id===t),d=c===p.panels.length-1,y=q({delta:d?a-r:r-a,initialLayout:m,panelConstraints:f,pivotIndices:d?[c-1,c]:[c,c+1],prevLayout:m,trigger:"imperative-api"}),S=T({layout:y,panelConstraints:f});W(m,S)||M(x=>({mountedGroups:new Map(x.mountedGroups).set(p,{defaultLayoutDeferred:u,derivedPanelConstraints:f,layout:S,separatorToPanels:h})}))};return{collapse:()=>{const{collapsible:r,collapsedSize:a}=o(),u=s();r&&u!==a&&l(a)},expand:()=>{const{collapsible:r,collapsedSize:a,minSize:u}=o(),f=s();r&&f===a&&l(u)},getSize:()=>{const{group:r}=n(),a=s(),{element:u}=i(),f=r.orientation==="horizontal"?u.offsetWidth:u.offsetHeight;return{asPercentage:a,inPixels:f}},isCollapsed:()=>{const{collapsible:r,collapsedSize:a}=o(),u=s();return r&&C(a,u)},resize:r=>{if(s()!==r){let u;switch(typeof r){case"number":{const{group:f}=n(),p=B({group:f});u=I(r/p*100);break}case"string":{u=parseFloat(r);break}}l(u)}}}}function Lt(e,t){const{id:n}=ue(),o=v.useRef({collapse:oe,expand:oe,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:oe});v.useImperativeHandle(t,()=>o.current,[]),_(()=>{Object.assign(o.current,wt({groupId:n,panelId:e}))})}function Pt({children:e,className:t,collapsedSize:n="0%",collapsible:o=!1,defaultSize:i,elementRef:s,id:l,maxSize:r="100%",minSize:a="0%",onResize:u,panelRef:f,style:p,...m}){const h=!!l,c=se(l),[d,y]=v.useState(null),S=le(y,s),{id:x,registerPanel:b}=ue(),g=u!==null,L=ae(R=>{u?.(R,l)});_(()=>{if(d!==null)return b({element:d,id:c,idIsStable:h,onResize:g?L:void 0,panelConstraints:{collapsedSize:n,collapsible:o,defaultSize:i,maxSize:r,minSize:a}})},[n,o,i,d,g,c,h,r,a,L,b]),Lt(c,f);const P=Ae(x,c);return U.jsx("div",{...m,"data-panel":!0,"data-testid":c,id:c,ref:S,style:{...Rt,flexBasis:0,flexGrow:`var(${P}, 1)`,flexShrink:1,overflow:"hidden",pointerEvents:`var(${Ne})`},children:U.jsx("div",{className:t,style:{width:"100%",height:"100%",...p},children:e})})}const Rt={minHeight:"unset",maxHeight:"unset",height:"unset",minWidth:"unset",maxWidth:"unset",width:"unset",flex:"unset",flexBasis:"unset",flexShrink:"unset",flexGrow:"unset",border:"unset",borderWidth:"unset",padding:"unset",margin:"unset"};function Ct(){return v.useState(null)}function Et(){return v.useRef(null)}function Mt({layout:e,panelConstraints:t,panelId:n,panelIndex:o}){let i,s;const l=e[n],r=t.find(a=>a.panelId===n);if(r){const a=r.maxSize,u=s=r.collapsible?r.collapsedSize:r.minSize,f=[o,o+1];s=T({layout:q({delta:u-l,initialLayout:e,panelConstraints:t,pivotIndices:f,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n],i=T({layout:q({delta:a-l,initialLayout:e,panelConstraints:t,pivotIndices:f,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n]}return{valueControls:n,valueMax:i,valueMin:s,valueNow:l}}function kt({children:e,className:t,elementRef:n,id:o,style:i,...s}){const l=se(o),[r,a]=v.useState({}),[u,f]=v.useState("inactive"),[p,m]=v.useState(null),h=le(m,n),{id:c,orientation:d,registerSeparator:y}=ue(),S=d==="horizontal"?"vertical":"horizontal";return _(()=>{if(p!==null){const x={element:p,id:l},b=y(x),g=O.addListener("interactionStateChange",P=>{f(P.state!=="inactive"&&P.hitRegions.some(R=>R.separator===x)?P.state:"inactive")}),L=O.addListener("mountedGroupsChange",P=>{P.forEach(({derivedPanelConstraints:R,layout:X,separatorToPanels:Y},Z)=>{if(Z.id===c){const J=Y.get(x);if(J){const N=J[0],V=Z.panels.indexOf(N);a(Mt({layout:X,panelConstraints:R,panelId:N.id,panelIndex:V}))}}})});return()=>{g(),L(),b()}}},[p,c,l,y]),U.jsx("div",{...s,"aria-controls":r.valueControls,"aria-orientation":S,"aria-valuemax":r.valueMax,"aria-valuemin":r.valueMin,"aria-valuenow":r.valueNow,children:e,className:t,"data-separator":u,"data-testid":l,id:l,ref:h,role:"separator",style:{flexBasis:"auto",...i,flexGrow:0,flexShrink:0},tabIndex:0})}exports.Group=yt;exports.Panel=Pt;exports.Separator=kt;exports.useDefaultLayout=vt;exports.useGroupCallbackRef=bt;exports.useGroupRef=zt;exports.usePanelCallbackRef=Ct;exports.usePanelRef=Et;
//# sourceMappingURL=react-resizable-panels.cjs.map
